var rp=require("request-promise"),Promise=require("bluebird"),xml2js=require("xml2js"),parser=new xml2js.Parser;module.exports=function(e){function t(){n=this}var n,r={headlines:"https://feeds.finance.yahoo.com/rss/2.0/headline?s=",industry:"https://feeds.finance.yahoo.com/rss/2.0/industry?s=",quote:"https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20(%22",historicalData:"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.historicaldata%20where%20symbol%20=%20%22",search:"http://d.yimg.com/aq/autoc?query="};return t.prototype={getHeadlines:function(t){var n=r.headlines+t+"&region=US&lang=en-US";return new Promise(function(t,r){e(n).then(function(e){parser.parseString(e,function(e,n){e?r(e):t({headlines:n.rss.channel[0].item})})}).catch(r)})},getQuote:function(t){var n=r.quote+t+"%22)&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=";return new Promise(function(t,r){e(n,{json:!0}).then(function(e){t(e.query.results)}).catch(r)})},getHistoricalData:function(t,n,s){var a=r.historicalData+t+"%22%20and%20startDate%20=%20%22"+n+"%22%20and%20endDate%20=%20%22"+s+"%22&diagnostics=true&env=store://datatables.org/alltableswithkeys";return new Promise(function(t,n){e(a,{json:!0}).then(function(e){t({data:e.query.results})}).catch(n)})},ticker:function(t){var n=r.search+encodeURIComponent(t)+"&region=US&lang=en-US";return new Promise(function(t,r){e(n,{json:!0}).then(function(e){t({search:e.ResultSet.Query,results:e.ResultSet.Result||[]})}).catch(r)})}},t}(rp);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInlhaG9vLmZpbmFuY2UuanMiXSwibmFtZXMiOlsicnAiLCJyZXF1aXJlIiwiUHJvbWlzZSIsInhtbDJqcyIsInBhcnNlciIsIlBhcnNlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJyIiwiWWFob29GaW5hbmNlQVBJIiwic2VsZiIsInRoaXMiLCJlbmRwb2ludHMiLCJoZWFkbGluZXMiLCJpbmR1c3RyeSIsInF1b3RlIiwiaGlzdG9yaWNhbERhdGEiLCJzZWFyY2giLCJwcm90b3R5cGUiLCJnZXRIZWFkbGluZXMiLCJ0aWNrZXIiLCJ1cmwiLCJyZXNvbHZlIiwicmVqZWN0IiwidGhlbiIsInhtbCIsInBhcnNlU3RyaW5nIiwiZXJyIiwianMiLCJyc3MiLCJjaGFubmVsIiwiaXRlbSIsImNhdGNoIiwiZ2V0UXVvdGUiLCJqc29uIiwicmVzIiwicXVlcnkiLCJyZXN1bHRzIiwiZ2V0SGlzdG9yaWNhbERhdGEiLCJzdGFydCIsImVuZCIsImRhdGEiLCJlbmNvZGVVUklDb21wb25lbnQiLCJSZXN1bHRTZXQiLCJRdWVyeSIsIlJlc3VsdCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsSUFBS0MsUUFBUSxtQkFDYkMsUUFBVUQsUUFBUSxZQUNsQkUsT0FBU0YsUUFBUSxVQUNqQkcsT0FBUyxHQUFJRCxRQUFPRSxNQUV4QkMsUUFBT0MsUUFBVSxTQUFVQyxHQVd6QixRQUFTQyxLQUNQQyxFQUFPQyxLQVhULEdBQUlELEdBRUFFLEdBQ0ZDLFVBQVcsc0RBQ1hDLFNBQVUsc0RBQ1ZDLE1BQU8sb0hBQ1BDLGVBQWdCLHlIQUNoQkMsT0FBUSxvQ0EyRFYsT0FwREFSLEdBQWdCUyxXQUNkQyxhQUFjLFNBQVNDLEdBQ3JCLEdBQUlDLEdBQU1ULEVBQVVDLFVBQVlPLEVBQVMsdUJBQ3pDLE9BQU8sSUFBSWxCLFNBQVEsU0FBU29CLEVBQVNDLEdBQ25DZixFQUFFYSxHQUNDRyxLQUFLLFNBQVNDLEdBQ2JyQixPQUFPc0IsWUFBWUQsRUFBSyxTQUFTRSxFQUFLQyxHQUNqQ0QsRUFBS0osRUFBT0ksR0FDVkwsR0FBU1QsVUFBV2UsRUFBR0MsSUFBSUMsUUFBUSxHQUFHQyxXQUc5Q0MsTUFBTVQsTUFJYlUsU0FBVSxTQUFTYixHQUNqQixHQUFJQyxHQUFNVCxFQUFVRyxNQUFRSyxFQUFTLGlGQUNyQyxPQUFPLElBQUlsQixTQUFRLFNBQVNvQixFQUFTQyxHQUNuQ2YsRUFBRWEsR0FBTWEsTUFBTSxJQUNYVixLQUFLLFNBQVNXLEdBQ2JiLEVBQVFhLEVBQUlDLE1BQU1DLFdBRW5CTCxNQUFNVCxNQUliZSxrQkFBbUIsU0FBU2xCLEVBQVFtQixFQUFPQyxHQUN6QyxHQUFJbkIsR0FBTVQsRUFBVUksZUFBaUJJLEVBQVMsa0NBQW9DbUIsRUFBUSxnQ0FBa0NDLEVBQU0sbUVBQ2xJLE9BQU8sSUFBSXRDLFNBQVEsU0FBU29CLEVBQVNDLEdBQ25DZixFQUFFYSxHQUFNYSxNQUFNLElBQ1hWLEtBQUssU0FBU1csR0FDYmIsR0FBU21CLEtBQU1OLEVBQUlDLE1BQU1DLFlBRTFCTCxNQUFNVCxNQUliSCxPQUFRLFNBQVNnQixHQUNmLEdBQUlmLEdBQU1ULEVBQVVLLE9BQVN5QixtQkFBbUJOLEdBQVMsdUJBQ3pELE9BQU8sSUFBSWxDLFNBQVEsU0FBU29CLEVBQVNDLEdBQ25DZixFQUFFYSxHQUFNYSxNQUFNLElBQ1hWLEtBQUssU0FBU1csR0FDYmIsR0FDRUwsT0FBUWtCLEVBQUlRLFVBQVVDLE1BQ3RCUCxRQUFTRixFQUFJUSxVQUFVRSxlQUcxQmIsTUFBTVQsT0FLUmQsR0FDTlQiLCJmaWxlIjoieWFob28uZmluYW5jZS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBycCA9IHJlcXVpcmUoJ3JlcXVlc3QtcHJvbWlzZScpO1xudmFyIFByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xudmFyIHhtbDJqcyA9IHJlcXVpcmUoJ3htbDJqcycpO1xudmFyIHBhcnNlciA9IG5ldyB4bWwyanMuUGFyc2VyKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKHIpIHtcbiAgdmFyIHNlbGY7XG5cbiAgdmFyIGVuZHBvaW50cyA9IHtcbiAgICBoZWFkbGluZXM6ICdodHRwczovL2ZlZWRzLmZpbmFuY2UueWFob28uY29tL3Jzcy8yLjAvaGVhZGxpbmU/cz0nLFxuICAgIGluZHVzdHJ5OiAnaHR0cHM6Ly9mZWVkcy5maW5hbmNlLnlhaG9vLmNvbS9yc3MvMi4wL2luZHVzdHJ5P3M9JyxcbiAgICBxdW90ZTogJ2h0dHBzOi8vcXVlcnkueWFob29hcGlzLmNvbS92MS9wdWJsaWMveXFsP3E9c2VsZWN0JTIwKiUyMGZyb20lMjB5YWhvby5maW5hbmNlLnF1b3RlcyUyMHdoZXJlJTIwc3ltYm9sJTIwaW4lMjAoJTIyJyxcbiAgICBoaXN0b3JpY2FsRGF0YTogJ2h0dHA6Ly9xdWVyeS55YWhvb2FwaXMuY29tL3YxL3B1YmxpYy95cWw/cT1zZWxlY3QlMjAqJTIwZnJvbSUyMHlhaG9vLmZpbmFuY2UuaGlzdG9yaWNhbGRhdGElMjB3aGVyZSUyMHN5bWJvbCUyMD0lMjAlMjInLFxuICAgIHNlYXJjaDogJ2h0dHA6Ly9kLnlpbWcuY29tL2FxL2F1dG9jP3F1ZXJ5PSdcbiAgfVxuXG4gIGZ1bmN0aW9uIFlhaG9vRmluYW5jZUFQSSgpIHtcbiAgICBzZWxmID0gdGhpcztcbiAgfVxuXG4gIFlhaG9vRmluYW5jZUFQSS5wcm90b3R5cGUgPSB7XG4gICAgZ2V0SGVhZGxpbmVzOiBmdW5jdGlvbih0aWNrZXIpIHtcbiAgICAgIHZhciB1cmwgPSBlbmRwb2ludHMuaGVhZGxpbmVzICsgdGlja2VyICsgJyZyZWdpb249VVMmbGFuZz1lbi1VUyc7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHIodXJsKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHhtbCkge1xuICAgICAgICAgICAgcGFyc2VyLnBhcnNlU3RyaW5nKHhtbCwgZnVuY3Rpb24oZXJyLCBqcykge1xuICAgICAgICAgICAgICBpZihlcnIpIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICBlbHNlIHJlc29sdmUoe2hlYWRsaW5lczoganMucnNzLmNoYW5uZWxbMF0uaXRlbX0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldFF1b3RlOiBmdW5jdGlvbih0aWNrZXIpIHtcbiAgICAgIHZhciB1cmwgPSBlbmRwb2ludHMucXVvdGUgKyB0aWNrZXIgKyAnJTIyKSZmb3JtYXQ9anNvbiZlbnY9c3RvcmUlM0ElMkYlMkZkYXRhdGFibGVzLm9yZyUyRmFsbHRhYmxlc3dpdGhrZXlzJmNhbGxiYWNrPSc7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHIodXJsLCB7anNvbjogdHJ1ZX0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICByZXNvbHZlKHJlcy5xdWVyeS5yZXN1bHRzKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldEhpc3RvcmljYWxEYXRhOiBmdW5jdGlvbih0aWNrZXIsIHN0YXJ0LCBlbmQpIHtcbiAgICAgIHZhciB1cmwgPSBlbmRwb2ludHMuaGlzdG9yaWNhbERhdGEgKyB0aWNrZXIgKyAnJTIyJTIwYW5kJTIwc3RhcnREYXRlJTIwPSUyMCUyMicgKyBzdGFydCArICclMjIlMjBhbmQlMjBlbmREYXRlJTIwPSUyMCUyMicgKyBlbmQgKyAnJTIyJmRpYWdub3N0aWNzPXRydWUmZW52PXN0b3JlOi8vZGF0YXRhYmxlcy5vcmcvYWxsdGFibGVzd2l0aGtleXMnO1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICByKHVybCwge2pzb246IHRydWV9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgcmVzb2x2ZSh7ZGF0YTogcmVzLnF1ZXJ5LnJlc3VsdHN9KTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHRpY2tlcjogZnVuY3Rpb24ocXVlcnkpIHtcbiAgICAgIHZhciB1cmwgPSBlbmRwb2ludHMuc2VhcmNoICsgZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KSArICcmcmVnaW9uPVVTJmxhbmc9ZW4tVVMnO1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICByKHVybCwge2pzb246IHRydWV9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgIHNlYXJjaDogcmVzLlJlc3VsdFNldC5RdWVyeSxcbiAgICAgICAgICAgICAgcmVzdWx0czogcmVzLlJlc3VsdFNldC5SZXN1bHQgfHwgW11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFlhaG9vRmluYW5jZUFQSTtcbn0pKHJwKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
