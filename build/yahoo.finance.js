var rp=require("request-promise"),Promise=require("bluebird"),xml2js=require("xml2js"),parser=new xml2js.Parser;module.exports=function(e){function t(){n=this,n.endpoints={headlines:"https://feeds.finance.yahoo.com/rss/2.0/headline?s=",industry:"https://feeds.finance.yahoo.com/rss/2.0/industry?s=",quote:"https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20(%22",historicalData:"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.historicaldata%20where%20symbol%20=%20%22",search:"http://d.yimg.com/aq/autoc?query="}}var n;return t.prototype={getHeadlines:function(t){var s=n.endpoints.headlines+t+"&region=US&lang=en-US";return new Promise(function(t,n){e(s).then(function(e){parser.parseString(e,function(e,s){e?n(e):t({headlines:s.rss.channel[0].item})})}).catch(n)})},getQuote:function(t){var s=n.endpoints.quote+t+"%22)&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=";return new Promise(function(t,n){e(s,{json:!0}).then(function(e){t(e.query.results)}).catch(n)})},getHistoricalData:function(t,s,r){var o=n.endpoints.historicalData+t+"%22%20and%20startDate%20=%20%22"+s+"%22%20and%20endDate%20=%20%22"+r+"%22&diagnostics=true&env=store://datatables.org/alltableswithkeys";return new Promise(function(t,n){e(o,{json:!0}).then(function(e){t({data:e.query.results.quote})}).catch(n)})},ticker:function(t){var s=n.endpoints.search+encodeURIComponent(t)+"&region=US&lang=en-US";return new Promise(function(t,n){e(s,{json:!0}).then(function(e){t({search:e.ResultSet.Query,results:e.ResultSet.Result||[]})}).catch(n)})}},t}(rp);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInlhaG9vLmZpbmFuY2UuanMiXSwibmFtZXMiOlsicnAiLCJyZXF1aXJlIiwiUHJvbWlzZSIsInhtbDJqcyIsInBhcnNlciIsIlBhcnNlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJyIiwiWWFob29GaW5hbmNlQVBJIiwic2VsZiIsInRoaXMiLCJlbmRwb2ludHMiLCJoZWFkbGluZXMiLCJpbmR1c3RyeSIsInF1b3RlIiwiaGlzdG9yaWNhbERhdGEiLCJzZWFyY2giLCJwcm90b3R5cGUiLCJnZXRIZWFkbGluZXMiLCJ0aWNrZXIiLCJ1cmwiLCJyZXNvbHZlIiwicmVqZWN0IiwidGhlbiIsInhtbCIsInBhcnNlU3RyaW5nIiwiZXJyIiwianMiLCJyc3MiLCJjaGFubmVsIiwiaXRlbSIsImNhdGNoIiwiZ2V0UXVvdGUiLCJqc29uIiwicmVzIiwicXVlcnkiLCJyZXN1bHRzIiwiZ2V0SGlzdG9yaWNhbERhdGEiLCJzdGFydCIsImVuZCIsImRhdGEiLCJlbmNvZGVVUklDb21wb25lbnQiLCJSZXN1bHRTZXQiLCJRdWVyeSIsIlJlc3VsdCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsSUFBS0MsUUFBUSxtQkFDYkMsUUFBVUQsUUFBUSxZQUNsQkUsT0FBU0YsUUFBUSxVQUNqQkcsT0FBUyxHQUFJRCxRQUFPRSxNQUV4QkMsUUFBT0MsUUFBVSxTQUFVQyxHQUd6QixRQUFTQyxLQUNQQyxFQUFPQyxLQUVQRCxFQUFLRSxXQUNIQyxVQUFXLHNEQUNYQyxTQUFVLHNEQUNWQyxNQUFPLG9IQUNQQyxlQUFnQix5SEFDaEJDLE9BQVEscUNBVlosR0FBSVAsRUFrRUosT0FwREFELEdBQWdCUyxXQUNkQyxhQUFjLFNBQVNDLEdBQ3JCLEdBQUlDLEdBQU1YLEVBQUtFLFVBQVVDLFVBQVlPLEVBQVMsdUJBQzlDLE9BQU8sSUFBSWxCLFNBQVEsU0FBU29CLEVBQVNDLEdBQ25DZixFQUFFYSxHQUNDRyxLQUFLLFNBQVNDLEdBQ2JyQixPQUFPc0IsWUFBWUQsRUFBSyxTQUFTRSxFQUFLQyxHQUNqQ0QsRUFBS0osRUFBT0ksR0FDVkwsR0FBU1QsVUFBV2UsRUFBR0MsSUFBSUMsUUFBUSxHQUFHQyxXQUc5Q0MsTUFBTVQsTUFJYlUsU0FBVSxTQUFTYixHQUNqQixHQUFJQyxHQUFNWCxFQUFLRSxVQUFVRyxNQUFRSyxFQUFTLGlGQUMxQyxPQUFPLElBQUlsQixTQUFRLFNBQVNvQixFQUFTQyxHQUNuQ2YsRUFBRWEsR0FBTWEsTUFBTSxJQUNYVixLQUFLLFNBQVNXLEdBQ2JiLEVBQVFhLEVBQUlDLE1BQU1DLFdBRW5CTCxNQUFNVCxNQUliZSxrQkFBbUIsU0FBU2xCLEVBQVFtQixFQUFPQyxHQUN6QyxHQUFJbkIsR0FBTVgsRUFBS0UsVUFBVUksZUFBaUJJLEVBQVMsa0NBQW9DbUIsRUFBUSxnQ0FBa0NDLEVBQU0sbUVBQ3ZJLE9BQU8sSUFBSXRDLFNBQVEsU0FBU29CLEVBQVNDLEdBQ25DZixFQUFFYSxHQUFNYSxNQUFNLElBQ1hWLEtBQUssU0FBU1csR0FDYmIsR0FBU21CLEtBQU1OLEVBQUlDLE1BQU1DLFFBQVF0QixVQUVsQ2lCLE1BQU1ULE1BSWJILE9BQVEsU0FBU2dCLEdBQ2YsR0FBSWYsR0FBTVgsRUFBS0UsVUFBVUssT0FBU3lCLG1CQUFtQk4sR0FBUyx1QkFDOUQsT0FBTyxJQUFJbEMsU0FBUSxTQUFTb0IsRUFBU0MsR0FDbkNmLEVBQUVhLEdBQU1hLE1BQU0sSUFDWFYsS0FBSyxTQUFTVyxHQUNiYixHQUNFTCxPQUFRa0IsRUFBSVEsVUFBVUMsTUFDdEJQLFFBQVNGLEVBQUlRLFVBQVVFLGVBRzFCYixNQUFNVCxPQUtSZCxHQUNOVCIsImZpbGUiOiJ5YWhvby5maW5hbmNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHJwID0gcmVxdWlyZSgncmVxdWVzdC1wcm9taXNlJyk7XG52YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XG52YXIgeG1sMmpzID0gcmVxdWlyZSgneG1sMmpzJyk7XG52YXIgcGFyc2VyID0gbmV3IHhtbDJqcy5QYXJzZXIoKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24ocikge1xuICB2YXIgc2VsZjtcblxuICBmdW5jdGlvbiBZYWhvb0ZpbmFuY2VBUEkoKSB7XG4gICAgc2VsZiA9IHRoaXM7XG5cbiAgICBzZWxmLmVuZHBvaW50cyA9IHtcbiAgICAgIGhlYWRsaW5lczogJ2h0dHBzOi8vZmVlZHMuZmluYW5jZS55YWhvby5jb20vcnNzLzIuMC9oZWFkbGluZT9zPScsXG4gICAgICBpbmR1c3RyeTogJ2h0dHBzOi8vZmVlZHMuZmluYW5jZS55YWhvby5jb20vcnNzLzIuMC9pbmR1c3RyeT9zPScsXG4gICAgICBxdW90ZTogJ2h0dHBzOi8vcXVlcnkueWFob29hcGlzLmNvbS92MS9wdWJsaWMveXFsP3E9c2VsZWN0JTIwKiUyMGZyb20lMjB5YWhvby5maW5hbmNlLnF1b3RlcyUyMHdoZXJlJTIwc3ltYm9sJTIwaW4lMjAoJTIyJyxcbiAgICAgIGhpc3RvcmljYWxEYXRhOiAnaHR0cDovL3F1ZXJ5LnlhaG9vYXBpcy5jb20vdjEvcHVibGljL3lxbD9xPXNlbGVjdCUyMColMjBmcm9tJTIweWFob28uZmluYW5jZS5oaXN0b3JpY2FsZGF0YSUyMHdoZXJlJTIwc3ltYm9sJTIwPSUyMCUyMicsXG4gICAgICBzZWFyY2g6ICdodHRwOi8vZC55aW1nLmNvbS9hcS9hdXRvYz9xdWVyeT0nXG4gICAgfVxuICB9XG5cbiAgWWFob29GaW5hbmNlQVBJLnByb3RvdHlwZSA9IHtcbiAgICBnZXRIZWFkbGluZXM6IGZ1bmN0aW9uKHRpY2tlcikge1xuICAgICAgdmFyIHVybCA9IHNlbGYuZW5kcG9pbnRzLmhlYWRsaW5lcyArIHRpY2tlciArICcmcmVnaW9uPVVTJmxhbmc9ZW4tVVMnO1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICByKHVybClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbih4bWwpIHtcbiAgICAgICAgICAgIHBhcnNlci5wYXJzZVN0cmluZyh4bWwsIGZ1bmN0aW9uKGVyciwganMpIHtcbiAgICAgICAgICAgICAgaWYoZXJyKSByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgZWxzZSByZXNvbHZlKHtoZWFkbGluZXM6IGpzLnJzcy5jaGFubmVsWzBdLml0ZW19KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRRdW90ZTogZnVuY3Rpb24odGlja2VyKSB7XG4gICAgICB2YXIgdXJsID0gc2VsZi5lbmRwb2ludHMucXVvdGUgKyB0aWNrZXIgKyAnJTIyKSZmb3JtYXQ9anNvbiZlbnY9c3RvcmUlM0ElMkYlMkZkYXRhdGFibGVzLm9yZyUyRmFsbHRhYmxlc3dpdGhrZXlzJmNhbGxiYWNrPSc7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHIodXJsLCB7anNvbjogdHJ1ZX0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICByZXNvbHZlKHJlcy5xdWVyeS5yZXN1bHRzKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldEhpc3RvcmljYWxEYXRhOiBmdW5jdGlvbih0aWNrZXIsIHN0YXJ0LCBlbmQpIHtcbiAgICAgIHZhciB1cmwgPSBzZWxmLmVuZHBvaW50cy5oaXN0b3JpY2FsRGF0YSArIHRpY2tlciArICclMjIlMjBhbmQlMjBzdGFydERhdGUlMjA9JTIwJTIyJyArIHN0YXJ0ICsgJyUyMiUyMGFuZCUyMGVuZERhdGUlMjA9JTIwJTIyJyArIGVuZCArICclMjImZGlhZ25vc3RpY3M9dHJ1ZSZlbnY9c3RvcmU6Ly9kYXRhdGFibGVzLm9yZy9hbGx0YWJsZXN3aXRoa2V5cyc7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHIodXJsLCB7anNvbjogdHJ1ZX0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICByZXNvbHZlKHtkYXRhOiByZXMucXVlcnkucmVzdWx0cy5xdW90ZX0pO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgdGlja2VyOiBmdW5jdGlvbihxdWVyeSkge1xuICAgICAgdmFyIHVybCA9IHNlbGYuZW5kcG9pbnRzLnNlYXJjaCArIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeSkgKyAnJnJlZ2lvbj1VUyZsYW5nPWVuLVVTJztcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcih1cmwsIHtqc29uOiB0cnVlfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICBzZWFyY2g6IHJlcy5SZXN1bHRTZXQuUXVlcnksXG4gICAgICAgICAgICAgIHJlc3VsdHM6IHJlcy5SZXN1bHRTZXQuUmVzdWx0IHx8IFtdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBZYWhvb0ZpbmFuY2VBUEk7XG59KShycCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
